(this.webpackJsonpaplicacao=this.webpackJsonpaplicacao||[]).push([[0],{114:function(e,t,a){},115:function(e,t,a){},228:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(82),o=a.n(c),r=(a(52),a(13)),s=a.n(r),i=a(20),l=a(10),u=a(83),d=a.n(u).a.create({baseURL:"https://api.elcoma.com.br/api/visits"}),j=a(1),b=Object(n.createContext)();function p(e){var t=e.children,a=Object(n.useState)(!1),c=Object(l.a)(a,2),o=c[0],r=c[1],u=Object(n.useState)(!1),p=Object(l.a)(u,2),h=p[0],O=p[1],x=Object(n.useState)(!0),m=Object(l.a)(x,2),g=m[0],f=m[1];function v(){return(v=Object(i.a)(s.a.mark((function e(){var t,a,n,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==(t=localStorage.getItem("usuario"))&&null!==t||(t=""),void 0!==(a=localStorage.getItem("senha"))&&null!==a||(a=""),n={username:t,password:a},e.next=7,d.post("/login",n);case 7:c=e.sent,null!=(i=c.data.token)?(localStorage.setItem("token",JSON.stringify(i)),d.defaults.headers.Authorization=i,window.location.replace("/")):!1===o&&(r(!0),setTimeout((function(){r(!1)}),3e3));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=localStorage.getItem("token");e&&(d.defaults.headers.Authorization=JSON.parse(e),O(!0)),f(!1)}),[]),Object(j.jsx)(b.Provider,{value:{loading:g,authenticated:h,buttonPopup:o,setButtonPopup:r,handleLogin:function(){return v.apply(this,arguments)},handleLogout:function(){localStorage.setItem("usuario",""),localStorage.setItem("senha",""),O(!1),localStorage.removeItem("token"),d.defaults.headers.Authorization=void 0,window.location.replace("/login")},handleBack:function(){localStorage.setItem("id",""),window.location.replace("/")}},children:t})}var h=a(15),O=a(84),x=a(2),m=a(88),g=a.p+"static/media/logovagalu.e15172b9.png";a(114),a(115);var f=function(e){return e.trigger?Object(j.jsx)("div",{className:"popup",children:Object(j.jsxs)("div",{className:"popup-inner",children:[Object(j.jsx)("button",{className:"close-button",onClick:function(){return e.setTrigger(!1)},children:"Close"}),e.children]})}):""};var v=function(){var e=Object(n.useContext)(b),t=e.handleLogin,a=e.buttonPopup,c=e.setButtonPopup;return Object(j.jsx)("div",{className:"divgrande",children:Object(j.jsxs)("div",{className:"divisao",children:[Object(j.jsx)("div",{children:Object(j.jsx)(f,{trigger:a,setTrigger:c,children:Object(j.jsx)("h2",{children:"Login/Senha Incorreta"})})}),Object(j.jsxs)("div",{className:"todoapp",children:[Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)("img",{src:g,className:"App-logo",alt:"logo"})}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(j.jsx)("div",{className:"textologin",children:"Username"}),Object(j.jsx)("input",{type:"text",id:"loginipt",className:"input input__lg entrada",name:"usuario",onChange:function(e){var t=e.target.value;localStorage.setItem("usuario",t)}}),Object(j.jsx)("div",{className:"textologin",children:"Password"}),Object(j.jsx)("input",{type:"password",id:"senhaipt",className:"input input__lg entrada",name:"senha",onChange:function(e){var t=e.target.value;localStorage.setItem("senha",t)},autoComplete:"off"}),Object(j.jsx)("button",{type:"button",className:"btn btn__primary botaoentrar",onClick:t,children:"Entrar"})]})]})]})})};var S=function(){var e=Object(n.useContext)(b).handleLogout,t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/get_clients");case 2:t=e.sent,a=t.data,o(a.clients);case 5:case"end":return e.stop()}}),e)})))()}),[]),Object(j.jsx)("div",{className:"system",children:Object(j.jsxs)("div",{className:"sistema",children:[Object(j.jsx)("div",{className:"caixa",children:Object(j.jsx)("h1",{children:"Vis\xe3o Geral"})}),c.map((function(e){return Object(j.jsx)("div",{className:"caixa",children:Object(j.jsx)("div",{className:"texto",children:Object(j.jsxs)("a",{href:(t=e.id,a=e.name,"/link/"+t+"+"+a),style:{textDecoration:"none",color:"Black"},children:[e.name," - ",e.id]})})},e.id);var t,a})),Object(j.jsx)("p",{}),Object(j.jsx)("button",{type:"button",onClick:e,children:"Sair"})]})})},N=a(89);var k=function(){var e=Object(n.useContext)(b),t=e.handleLogout,a=e.handleBack,c=Object(n.useState)([]),o=Object(l.a)(c,2),r=o[0],u=o[1];Object(n.useEffect)((function(){Object(i.a)(s.a.mark((function e(){var t,a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("id"),a="/get_client_data/"+t,e.next=4,d.get(a);case 4:n=e.sent,c=n.data,u(c);case 7:case"end":return e.stop()}}),e)})))()}),[]);var p=localStorage.getItem("nome");return Object(j.jsx)("div",{className:"system",children:Object(j.jsxs)("div",{className:"sistema",children:[Object(j.jsx)("h1",{children:"Tabela"}),Object(j.jsx)("h2",{children:p}),Object(j.jsx)(N.a,{data:function(e){return{labels:["10:22","11:22","12:22","13:22","14:22","15:22","16:22","17:22","18:22","19:22","20:22","21:22"],datasets:[{label:"Acesso \xe0 rede WIFI",fontSize:45,fontStyle:"bold",borderWidth:3,borderColor:"rgba(255, 5, 5, 0.945)",data:r.data,fill:!0}]}},options:function(){return{title:{display:!0,fontSize:25,label:"Relat\xf3rio de ee"},labels:{fontStyle:"bold"}}}}),Object(j.jsx)("button",{type:"button",onClick:a,children:"Voltar"}),Object(j.jsx)("p",{children:"     "}),Object(j.jsx)("button",{type:"button",onClick:t,children:"Sair"})]})})},I=["isPrivate","path"];function w(e){var t=e.isPrivate,a=e.path,c=Object(O.a)(e,I),o=Object(n.useContext)(b),r=o.loading,s=o.authenticated;if(r)return Object(j.jsx)("h2",{children:"..."});if(t&&!s)return Object(j.jsx)(x.a,{to:"/Login"});if("/Login"===a&&s)return Object(j.jsx)(x.a,{to:"/"});if(a.includes("/link")){var i=Object(h.a)({},c).location.pathname;i=i.replace("/link/","").split("+"),localStorage.setItem("id",i[0]),localStorage.setItem("nome",i[1])}return Object(j.jsx)(x.b,Object(h.a)({},c))}var y=function(){return Object(j.jsx)(m.a,{children:Object(j.jsxs)(x.d,{children:[Object(j.jsx)(w,{exact:!0,path:"/Login",component:v}),Object(j.jsx)(w,{isPrivate:!0,exact:!0,path:"/",component:S}),Object(j.jsx)(w,{isPrivate:!0,exact:!0,path:"/id",component:k}),Object(j.jsx)(w,{isPrivate:!0,path:"/link",component:k})]})})},C=function(){return Object(j.jsx)(p,{children:Object(j.jsx)(y,{})})};o.a.render(Object(j.jsx)("div",{children:Object(j.jsx)(C,{})}),document.getElementById("root"))},52:function(e,t,a){}},[[228,1,2]]]);
//# sourceMappingURL=main.921f18f6.chunk.js.map